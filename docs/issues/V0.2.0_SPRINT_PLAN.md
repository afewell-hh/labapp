# v0.2.0 Sprint Plan - Pre-Warmed Build

**Milestone:** v0.2.0 - Pre-warmed Build
**Target Release:** January 31, 2026
**Duration:** 6 weeks (3 sprints)
**Total Story Points:** 48

---

## Overview

v0.2.0 adds a second build variant optimized for workshops that require instant lab readiness. This milestone implements the pre-warmed build pipeline defined in ADR-001, establishes cloud distribution, and fixes CI build issues from v0.1.0.

---

## Epics

### Epic #38: Pre-Warmed Build Pipeline (28 points)
**Goal:** Implement second build variant with build-time initialization

**Sub-issues:**
- #41: Create pre-warmed Packer template (5 pts)
- #42: Implement build-time VLAB initialization (8 pts)
- #43: Create on-demand build workflow (5 pts)
- #44: Implement build-type detection (3 pts)
- #45: Test pre-warmed build end-to-end (5 pts)
- #46: Update documentation for pre-warmed builds (2 pts)

### Epic #39: Cloud Storage & Distribution (12 points)
**Goal:** Establish distribution channels for large artifacts

**Sub-issues:**
- #47: Design artifact storage strategy (3 pts)
- #48: Implement artifact upload automation (5 pts)
- #49: Create download portal documentation (4 pts)

### Epic #40: CI Build Fixes (8 points)
**Goal:** Resolve GitHub Actions SSH authentication issue

**Sub-issues:**
- #50: Debug SSH authentication in CI (5 pts)
- #51: Implement CI build fix (3 pts)

---

## Sprint Breakdown

### Sprint 5: Pre-Warmed Foundation (Weeks 9-10)
**Goal:** Implement core pre-warmed build capability

**Issues:**
- #41: Create pre-warmed Packer template (5 pts)
- #42: Implement build-time VLAB initialization (8 pts)
- #44: Implement build-type detection (3 pts)

**Total:** 16 points
**Risk Level:** Medium (nested virtualization requirements)

**Success Criteria:**
- Pre-warmed Packer template validates
- Build-time initialization completes successfully
- Orchestrator correctly detects build types

**Blockers:**
- Requires self-hosted runner with KVM support

---

### Sprint 6: Testing & Distribution Setup (Weeks 11-12)
**Goal:** Validate pre-warmed builds and design distribution

**Issues:**
- #45: Test pre-warmed build end-to-end (5 pts)
- #43: Create on-demand build workflow (5 pts)
- #47: Design artifact storage strategy (3 pts)
- #46: Update documentation for pre-warmed builds (2 pts)

**Total:** 15 points
**Risk Level:** Low

**Success Criteria:**
- Pre-warmed build passes all E2E tests
- First boot completes in <5 minutes
- Storage provider selected and documented
- Documentation updated for both build types

**Dependencies:**
- Sprint 5 issues must be complete

---

### Sprint 7: Cloud Storage & CI Fixes (Weeks 13-14)
**Goal:** Implement cloud distribution and fix CI builds

**Issues:**
- #48: Implement artifact upload automation (5 pts)
- #49: Create download portal documentation (4 pts)
- #50: Debug SSH authentication in CI (5 pts)
- #51: Implement CI build fix (3 pts)

**Total:** 17 points
**Risk Level:** Medium (CI debugging may take longer than estimated)

**Success Criteria:**
- Automated upload to cloud storage working
- Download documentation complete
- GitHub Actions builds complete successfully
- Standard build OVA generated in CI

**Risk Mitigation:**
- Start CI debugging early (parallel with other work)
- Allocate buffer time for unexpected issues

---

## Technical Requirements

### Infrastructure

**Self-Hosted Runner:**
- CPU: 16+ cores
- Memory: 32GB+ RAM
- Disk: 500GB+ SSD
- KVM support enabled
- Network: High bandwidth for uploads

**Cloud Storage:**
- Provider TBD in Sprint 6 (#47)
- Estimated cost: $50-100/month
- CDN for downloads (optional)

### Build Performance Targets

| Metric | Target | v0.1.0 Baseline |
|--------|--------|-----------------|
| Pre-warmed build time | 60-90 min | N/A |
| Pre-warmed OVA size | 80-100GB | N/A |
| Pre-warmed first boot | <5 min | 15-20 min (standard) |
| Standard build in CI | <90 min | Failed (SSH auth) |

---

## Dependencies & Risks

### Critical Path
1. Pre-warmed template (#41) → Build-time init (#42)
2. Build-time init (#42) → E2E testing (#45)
3. E2E testing (#45) → Documentation (#46)
4. Storage strategy (#47) → Upload automation (#48)
5. CI debugging (#50) → CI fix (#51)

### Risk Register

| Risk | Probability | Impact | Mitigation |
|------|-------------|--------|------------|
| Nested virtualization unstable | Medium | High | Test extensively in Sprint 5; have fallback to local-only builds |
| CI debugging takes longer | High | Medium | Start early; allocate buffer time |
| Self-hosted runner setup delayed | Medium | High | Begin setup before Sprint 5 starts |
| Storage costs exceed budget | Low | Medium | Select cost-effective provider; implement retention policy |
| Build time exceeds 90 min | Medium | Low | Optimize provisioning; acceptable if <120 min |

---

## Success Metrics

### Functional Requirements
- ✅ Pre-warmed build completes successfully
- ✅ First boot <5 minutes (vs. 15-20 for standard)
- ✅ All services operational immediately
- ✅ CI builds working with artifacts
- ✅ Cloud distribution operational

### Quality Requirements
- All acceptance criteria met
- E2E tests passing
- Documentation complete
- No regressions in standard build

### Performance Requirements
- Pre-warmed build: 60-90 minutes
- Pre-warmed first boot: <5 minutes
- Standard build CI: <90 minutes

---

## Issue Assignment Strategy

### Sprint 5
Assign in order:
1. #41 → Agent (Foundation work)
2. #44 → Agent (Parallel with #41)
3. #42 → Agent (After #41 complete)

### Sprint 6
Assign in order:
1. #47 → Agent (Can start immediately)
2. #45 → Agent (After Sprint 5 complete)
3. #43 → Agent (Parallel with #45)
4. #46 → Agent (After #45 complete)

### Sprint 7
Assign in parallel:
1. #50 + #51 → Agent (CI track)
2. #48 + #49 → Agent (Storage track)

---

## Testing Strategy

### Pre-Warmed Build Testing
- Build locally before CI integration
- Test on multiple hypervisors (VMware, VirtualBox)
- Performance benchmarking
- Side-by-side comparison with standard build

### CI Testing
- Test fix locally with TCG first
- Gradual rollout to CI
- Monitor build times and success rates

### Integration Testing
- Verify both build types can coexist
- Test orchestrator with both build types
- Validate all CLI commands work correctly

---

## Documentation Deliverables

### New Documents
- `docs/PREWARMED_BUILD.md` - Pre-warmed build guide
- `docs/DOWNLOADS.md` - Download portal
- `docs/adr/004-artifact-storage.md` - Storage decision

### Updated Documents
- `docs/INSTALL.md` - Build comparison
- `docs/FAQ.md` - Build selection guidance
- `README.md` - Pre-warmed build info
- `docs/RELEASE_PROCESS.md` - Artifact upload steps

---

## Post-Sprint Activities

### After Sprint 7 (v0.2.0 Release)
1. Create v0.2.0 release (similar to #23)
2. Update ROADMAP.md status
3. Publish release notes
4. Update milestones to "✅ Complete"
5. Begin v0.3.0 planning (Scenario Management)

### Lessons Learned
- Document what worked well
- Identify process improvements
- Update sprint estimation accuracy

---

## Communication Plan

### Sprint Reviews
- End of each sprint: Demo to stakeholders
- Show working pre-warmed build
- Review metrics and velocity

### Daily Updates
- Team lead reviews PR submissions
- Address blockers immediately
- Adjust sprint scope if needed

### Stakeholder Updates
- Weekly progress email
- Highlight risks and mitigations
- Share performance metrics

---

## Notes

- This plan assumes continued use of AI agent pool model from v0.1.0
- All agents must follow CLAUDE.md workflow guidelines
- PR-based workflow with code review remains mandatory
- Self-hosted runner must be operational before Sprint 5 starts

---

**Last Updated:** November 5, 2025
**Version:** 1.0
**Status:** Ready for execution
